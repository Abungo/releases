<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RenSkyLab App Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap & Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
body {
    background: #f1f3f4;
}
.app-card {
    border-radius: 14px;
    transition: 0.2s;
    cursor: pointer;
}
.app-card:hover {
    transform: scale(1.03);
}
.app-icon {
    height: 180px;
    object-fit: cover;
}
</style>
</head>

<body>

<nav class="navbar navbar-dark bg-dark">
    <div class="container">
        <span class="navbar-brand">
            <i class="fas fa-store"></i> RenSkyLab App Store
        </span>
    </div>
</nav>

<div class="container my-4">
    <div class="row" id="appList"></div>
    <div id="appDetails" class="d-none"></div>
</div>

<script>
let APPS = [];

const appList = document.getElementById("appList");
const appDetails = document.getElementById("appDetails");

/* Load apps.json */
fetch("apps.json")
.then(res => res.json())
.then(data => {
    APPS = data.apps;
    renderHome();
});

/* Home page */
function renderHome() {
    appDetails.classList.add("d-none");
    appList.innerHTML = "";

    APPS.forEach(app => {
        appList.innerHTML += `
        <div class="col-md-4 mb-4">
            <div class="card app-card shadow-sm"
                 onclick="openApp('${app.id}')">
                <img src="${app.icon}" class="card-img-top app-icon">
                <div class="card-body">
                    <h5>${app.name}</h5>
                    <p class="text-muted">${app.bottler}</p>
                </div>
            </div>
        </div>`;
    });
}

/* App details page */
function openApp(id) {
    const app = APPS.find(a => a.id === id);
    if (!app) return;

    appList.innerHTML = "";
    appDetails.classList.remove("d-none");

    appDetails.innerHTML = `
        <button class="btn btn-sm btn-secondary mb-3"
                onclick="renderHome()">← Back</button>

        <div class="row">
            <div class="col-md-3">
                <img src="${app.icon}" class="img-fluid rounded">
            </div>
            <div class="col-md-9">
                <h2>${app.name}</h2>
                <p>${app.description}</p>
                <p><b>Bottler:</b> ${app.bottler}</p>
                <p><b>Latest Version:</b> ${app.versions[0].version}</p>
                <a class="btn btn-success btn-lg"
                   href="${app.versions[0].apk}">
                   ⬇ Download
                </a>
            </div>
        </div>

        <hr>

        <h5>All Versions</h5>
        <ul class="list-group">
            ${app.versions.map(v => `
                <li class="list-group-item d-flex justify-content-between">
                    <span>v${v.version} – ${v.date}</span>
                    <a href="${v.apk}"
                       class="btn btn-sm btn-outline-primary">
                       Download
                    </a>
                </li>
            `).join("")}
        </ul>
    `;
}
</script>

</body>
</html>
